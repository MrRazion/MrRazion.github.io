<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Chat</title>
    <style>
        body {
            background-color: #2a2a2a;
            margin: 0;
            padding: 15px;
            font-family: Arial, sans-serif;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 10px;
        }
        .message {
            background-color: #3a3a3a;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }
        .bot-message {
            background-color: #4a4a4a;
            align-self: flex-start;
        }
        .user-message {
            background-color: #1a73e8;
            align-self: flex-end;
            margin-left: auto;
        }
        .input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
            background-color: #2a2a2a;
            border-top: 1px solid #4a4a4a;
        }
        .input {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 20px;
            background-color: #3a3a3a;
            color: #ffffff;
            outline: none;
        }
        .send-btn {
            background-color: #1a73e8;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .send-btn:hover {
            background-color: #1557b0;
        }
        .buttons-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .option-btn {
            background-color: #5a5a5a;
            border: none;
            border-radius: 15px;
            padding: 8px 15px;
            color: #ffffff;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .option-btn:hover {
            background-color: #6a6a6a;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="chat-container" id="chat"></div>
    <div class="input-container">
        <input type="text" class="input" id="messageInput" placeholder="ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ...">
        <button class="send-btn" onclick="sendMessage()">âž¤</button>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const chat = document.getElementById('chat');
        const input = document.getElementById('messageInput');

        // ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð±Ð¾Ñ‚Ð°
        function startChat() {
            addBotMessage("ðŸ‘‹ ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð§ÐµÐ¼ Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ?");
            addButtons([
                { text: "ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ð¾Ð¹", action: "payment_issue" },
                { text: "Ð’Ð¾Ð¿Ñ€Ð¾Ñ Ð¿Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ñƒ", action: "product_question" },
                { text: "Ð¡Ð¾Ð¾Ð±Ñ‰Ð¸Ñ‚ÑŒ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ", action: "report_bug" },
                { text: "Ð”Ñ€ÑƒÐ³Ð¾Ðµ", action: "other" }
            ]);
        }

        // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð±Ð¾Ñ‚Ð°
        function addBotMessage(text) {
            const message = document.createElement('div');
            message.className = 'message bot-message';
            message.textContent = text;
            chat.appendChild(message);
            chat.scrollTop = chat.scrollHeight;
        }

        // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
        function addUserMessage(text) {
            const message = document.createElement('div');
            message.className = 'message user-message';
            message.textContent = text;
            chat.appendChild(message);
            chat.scrollTop = chat.scrollHeight;
        }

        // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ½Ð¾Ð¿Ð¾Ðº
        function addButtons(buttons) {
            const container = document.createElement('div');
            container.className = 'buttons-container';
            buttons.forEach(btn => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = btn.text;
                button.onclick = () => handleButtonClick(btn.action);
                container.appendChild(button);
            });
            chat.appendChild(container);
            chat.scrollTop = chat.scrollHeight;
        }

        // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð²Ð²Ð¾Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
        function sendMessage() {
            const text = input.value.trim();
            if (!text) return;
            addUserMessage(text);
            input.value = '';
            handleUserInput(text);
        }

        // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº
        function handleButtonClick(action) {
            addUserMessage(action); // Ð”Ð»Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ²ÑÐ·Ð¸
            switch (action) {
                case 'payment_issue':
                    addBotMessage("ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ð¾Ð¹. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð½Ðµ Ð¿Ñ€Ð¸ÑˆÑ‘Ð» Ñ‚Ð¾Ð²Ð°Ñ€, Ð¾ÑˆÐ¸Ð±ÐºÐ° Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð¸ Ñ‚.Ð´.");
                    addButtons([
                        { text: "ÐÐµ Ð¿Ñ€Ð¸ÑˆÑ‘Ð» Ñ‚Ð¾Ð²Ð°Ñ€", action: "no_product" },
                        { text: "Ð”Ð²Ð¾Ð¹Ð½Ð¾Ðµ ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ", action: "double_charge" },
                        { text: "Ð”Ñ€ÑƒÐ³Ð¾Ðµ", action: "other_payment" }
                    ]);
                    break;
                case 'product_question':
                    addBotMessage("ÐšÐ°ÐºÐ¾Ð¹ Ñƒ Ð²Ð°Ñ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¿Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ñƒ? Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð²Ð°Ñ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÐµÑ‚.");
                    addButtons([
                        { text: "ÐšÐ°Ðº Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡", action: "activate_key" },
                        { text: "Ð¡Ñ€Ð¾Ðº Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸", action: "delivery_time" },
                        { text: "Ð”Ñ€ÑƒÐ³Ð¾Ðµ", action: "other_product" }
                    ]);
                    break;
                case 'report_bug':
                    addBotMessage("Ð Ð°ÑÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ, ÐºÐ°ÐºÑƒÑŽ Ð¾ÑˆÐ¸Ð±ÐºÑƒ Ð²Ñ‹ Ð·Ð°Ð¼ÐµÑ‚Ð¸Ð»Ð¸. ÐŸÑ€Ð¸Ð»Ð¾Ð¶Ð¸Ñ‚Ðµ Ð´ÐµÑ‚Ð°Ð»Ð¸ (ÑÐºÑ€Ð¸Ð½ÑˆÐ¾Ñ‚ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð² Ð±Ð¾Ñ‚Ðµ).");
                    break;
                case 'other':
                    addBotMessage("ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð²Ð°ÑˆÑƒ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑŽ, Ð¸ Ñ Ð¿Ð¾ÑÑ‚Ð°Ñ€Ð°ÑŽÑÑŒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ!");
                    break;
                case 'no_product':
                    addBotMessage("Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ ÑÑƒÐ¼Ð¼Ñƒ Ð¸ Ð´Ð°Ñ‚Ñƒ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ñ‹ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð»Ð¸ Ð²Ð°Ñˆ Ð·Ð°ÐºÐ°Ð·.");
                    break;
                case 'double_charge':
                    addBotMessage("ÐÐ°Ð·Ð¾Ð²Ð¸ ÑÑƒÐ¼Ð¼Ñƒ Ð¸ Ð´Ð°Ñ‚Ñƒ Ð´Ð²Ð¾Ð¹Ð½Ð¾Ð³Ð¾ ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ, Ñ Ð¿ÐµÑ€ÐµÐ´Ð°Ð¼ ÑÑ‚Ð¾ Ð² Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ.");
                    break;
                case 'other_payment':
                    addBotMessage("ÐžÐ¿Ð¸ÑˆÐ¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ, Ñ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ñ‚ÑŒÑÑ.");
                    break;
                case 'activate_key':
                    addBotMessage("Ð”Ð»Ñ Ð°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ð¸ ÐºÐ»ÑŽÑ‡Ð° ÑÐ»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð² Ð²Ð°ÑˆÐµÐ¼ Ð·Ð°ÐºÐ°Ð·Ðµ. Ð•ÑÐ»Ð¸ Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ÑÑ, Ð½Ð°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ ÐºÐ¾Ð´ Ð¾ÑˆÐ¸Ð±ÐºÐ¸.");
                    break;
                case 'delivery_time':
                    addBotMessage("ÐžÐ±Ñ‹Ñ‡Ð½Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ° Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÑ‚ 5-30 Ð¼Ð¸Ð½ÑƒÑ‚. Ð•ÑÐ»Ð¸ Ð´Ð¾Ð»ÑŒÑˆÐµ, ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð´Ð°Ñ‚Ñƒ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹.");
                    break;
                case 'other_product':
                    addBotMessage("Ð—Ð°Ð´Ð°Ð¹Ñ‚Ðµ ÑÐ²Ð¾Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¿Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ñƒ, Ñ Ð¿Ð¾ÑÑ‚Ð°Ñ€Ð°ÑŽÑÑŒ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ!");
                    break;
                default:
                    addBotMessage("Ð¯ Ð¿Ð¾ÐºÐ° Ð½Ðµ Ð·Ð½Ð°ÑŽ, ÐºÐ°Ðº Ð½Ð° ÑÑ‚Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ. ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ!");
            }
        }

        // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð°
        function handleUserInput(text) {
            const lowerText = text.toLowerCase();
            if (lowerText.includes("Ð¾Ð¿Ð»Ð°Ñ‚") || lowerText.includes("Ð´ÐµÐ½ÑŒÐ³Ð¸")) {
                addBotMessage("ÐšÐ°Ð¶ÐµÑ‚ÑÑ, Ñƒ Ð²Ð°Ñ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¿Ð¾ Ð¾Ð¿Ð»Ð°Ñ‚Ðµ. Ð£Ñ‚Ð¾Ñ‡Ð½Ð¸Ñ‚Ðµ Ð´ÐµÑ‚Ð°Ð»Ð¸!");
                addButtons([
                    { text: "ÐÐµ Ð¿Ñ€Ð¸ÑˆÑ‘Ð» Ñ‚Ð¾Ð²Ð°Ñ€", action: "no_product" },
                    { text: "Ð”Ð²Ð¾Ð¹Ð½Ð¾Ðµ ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ", action: "double_charge" }
                ]);
            } else if (lowerText.includes("ÐºÐ»ÑŽÑ‡") || lowerText.includes("Ñ‚Ð¾Ð²Ð°Ñ€")) {
                addBotMessage("ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, ÑÑ‚Ð¾ Ð¿Ñ€Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€. Ð§Ñ‚Ð¾ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð²Ð°Ñ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÐµÑ‚?");
                addButtons([
                    { text: "ÐšÐ°Ðº Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡", action: "activate_key" },
                    { text: "Ð¡Ñ€Ð¾Ðº Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸", action: "delivery_time" }
                ]);
            } else if (lowerText.includes("Ð¾ÑˆÐ¸Ð±ÐºÐ°") || lowerText.includes("Ð±Ð°Ð³")) {
                addBotMessage("ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð¾ÑˆÐ¸Ð±ÐºÑƒ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ, Ñ Ð¿ÐµÑ€ÐµÐ´Ð°Ð¼ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ°Ð¼!");
            } else {
                addBotMessage("ÐÐµ ÑÐ¾Ð²ÑÐµÐ¼ Ð¿Ð¾Ð½ÑÐ». ÐœÐ¾Ð¶ÐµÑ‚Ðµ ÑƒÑ‚Ð¾Ñ‡Ð½Ð¸Ñ‚ÑŒ? Ð’Ð¾Ñ‚ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹:");
                addButtons([
                    { text: "ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ð¾Ð¹", action: "payment_issue" },
                    { text: "Ð’Ð¾Ð¿Ñ€Ð¾Ñ Ð¿Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ñƒ", action: "product_question" },
                    { text: "Ð¡Ð¾Ð¾Ð±Ñ‰Ð¸Ñ‚ÑŒ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ", action: "report_bug" }
                ]);
            }
        }

        // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Enter
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Ð¡Ñ‚Ð°Ñ€Ñ‚ Ñ‡Ð°Ñ‚Ð°
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
        startChat();
    </script>
</body>
</html>