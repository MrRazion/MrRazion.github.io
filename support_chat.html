<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Chat</title>
    <style>
        body {
            background-color: #2a2a2a;
            margin: 0;
            padding: 15px;
            font-family: Arial, sans-serif;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 10px;
        }
        .message {
            background-color: #3a3a3a;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }
        .bot-message {
            background-color: #4a4a4a;
            align-self: flex-start;
        }
        .user-message {
            background-color: #1a73e8;
            align-self: flex-end;
            margin-left: auto;
        }
        .input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
            background-color: #2a2a2a;
            border-top: 1px solid #4a4a4a;
        }
        .input {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 20px;
            background-color: #3a3a3a;
            color: #ffffff;
            outline: none;
        }
        .send-btn {
            background-color: #1a73e8;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .send-btn:hover {
            background-color: #1557b0;
        }
        .buttons-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .option-btn {
            background-color: #5a5a5a;
            border: none;
            border-radius: 15px;
            padding: 8px 15px;
            color: #ffffff;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .option-btn:hover {
            background-color: #6a6a6a;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="chat-container" id="chat"></div>
    <div class="input-container">
        <input type="text" class="input" id="messageInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
        <button class="send-btn" onclick="sendMessage()">‚û§</button>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const chat = document.getElementById('chat');
        const input = document.getElementById('messageInput');

        // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞
        function startChat() {
            addBotMessage("üëã –ü—Ä–∏–≤–µ—Ç! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?");
            addButtons([
                { text: "–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–ø–ª–∞—Ç–æ–π", action: "payment_issue" },
                { text: "–í–æ–ø—Ä–æ—Å –ø–æ —Ç–æ–≤–∞—Ä—É", action: "product_question" },
                { text: "–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ", action: "report_bug" },
                { text: "–î—Ä—É–≥–æ–µ", action: "other" }
            ]);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞
        function addBotMessage(text) {
            const message = document.createElement('div');
            message.className = 'message bot-message';
            message.textContent = text;
            chat.appendChild(message);
            chat.scrollTop = chat.scrollHeight;
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function addUserMessage(text) {
            const message = document.createElement('div');
            message.className = 'message user-message';
            message.textContent = text;
            chat.appendChild(message);
            chat.scrollTop = chat.scrollHeight;
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
        function addButtons(buttons) {
            const container = document.createElement('div');
            container.className = 'buttons-container';
            buttons.forEach(btn => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = btn.text;
                button.onclick = () => handleButtonClick(btn.action);
                container.appendChild(button);
            });
            chat.appendChild(container);
            chat.scrollTop = chat.scrollHeight;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function sendMessage() {
            const text = input.value.trim();
            if (!text) return;
            addUserMessage(text);
            input.value = '';
            handleUserInput(text);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫
        function handleButtonClick(action) {
            addUserMessage(action); // –î–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
            switch (action) {
                case 'payment_issue':
                    addBotMessage("–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É —Å –æ–ø–ª–∞—Ç–æ–π. –ù–∞–ø—Ä–∏–º–µ—Ä: –Ω–µ –ø—Ä–∏—à—ë–ª —Ç–æ–≤–∞—Ä, –æ—à–∏–±–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ —Ç.–¥.");
                    addButtons([
                        { text: "–ù–µ –ø—Ä–∏—à—ë–ª —Ç–æ–≤–∞—Ä", action: "no_product" },
                        { text: "–î–≤–æ–π–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ", action: "double_charge" },
                        { text: "–î—Ä—É–≥–æ–µ", action: "other_payment" }
                    ]);
                    break;
                case 'product_question':
                    addBotMessage("–ö–∞–∫–æ–π —É –≤–∞—Å –≤–æ–ø—Ä–æ—Å –ø–æ —Ç–æ–≤–∞—Ä—É? –£–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç.");
                    addButtons([
                        { text: "–ö–∞–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á", action: "activate_key" },
                        { text: "–°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏", action: "delivery_time" },
                        { text: "–î—Ä—É–≥–æ–µ", action: "other_product" }
                    ]);
                    break;
                case 'report_bug':
                    addBotMessage("–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫—É—é –æ—à–∏–±–∫—É –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ (—Å–∫—Ä–∏–Ω—à–æ—Ç –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –±–æ—Ç–µ).");
                    break;
                case 'other':
                    addBotMessage("–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é, –∏ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–º–æ—á—å!");
                    break;
                case 'no_product':
                    addBotMessage("–£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É –∏ –¥–∞—Ç—É –æ–ø–ª–∞—Ç—ã, —á—Ç–æ–±—ã –º—ã –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑.");
                    break;
                case 'double_charge':
                    addBotMessage("–ù–∞–∑–æ–≤–∏ —Å—É–º–º—É –∏ –¥–∞—Ç—É –¥–≤–æ–π–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è, —è –ø–µ—Ä–µ–¥–∞–º —ç—Ç–æ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.");
                    break;
                case 'other_payment':
                    addBotMessage("–û–ø–∏—à–∏ –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —è –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è.");
                    break;
                case 'activate_key':
                    addBotMessage("–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–ª—é—á–∞ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –≤–∞—à–µ–º –∑–∞–∫–∞–∑–µ. –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–¥ –æ—à–∏–±–∫–∏.");
                    break;
                case 'delivery_time':
                    addBotMessage("–û–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 5-30 –º–∏–Ω—É—Ç. –ï—Å–ª–∏ –¥–æ–ª—å—à–µ, —É–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –æ–ø–ª–∞—Ç—ã.");
                    break;
                case 'other_product':
                    addBotMessage("–ó–∞–¥–∞–π—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –ø–æ —Ç–æ–≤–∞—Ä—É, —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å!");
                    break;
                default:
                    addBotMessage("–Ø –ø–æ–∫–∞ –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –Ω–∞ —ç—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç—å. –ù–∞–ø–∏—à–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ!");
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
        function handleUserInput(text) {
            const lowerText = text.toLowerCase();
            if (lowerText.includes("–æ–ø–ª–∞—Ç") || lowerText.includes("–¥–µ–Ω—å–≥–∏")) {
                addBotMessage("–ö–∞–∂–µ—Ç—Å—è, —É –≤–∞—Å –≤–æ–ø—Ä–æ—Å –ø–æ –æ–ø–ª–∞—Ç–µ. –£—Ç–æ—á–Ω–∏—Ç–µ –¥–µ—Ç–∞–ª–∏!");
                addButtons([
                    { text: "–ù–µ –ø—Ä–∏—à—ë–ª —Ç–æ–≤–∞—Ä", action: "no_product" },
                    { text: "–î–≤–æ–π–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ", action: "double_charge" }
                ]);
            } else if (lowerText.includes("–∫–ª—é—á") || lowerText.includes("—Ç–æ–≤–∞—Ä")) {
                addBotMessage("–ü–æ—Ö–æ–∂–µ, —ç—Ç–æ –ø—Ä–æ —Ç–æ–≤–∞—Ä. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?");
                addButtons([
                    { text: "–ö–∞–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á", action: "activate_key" },
                    { text: "–°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏", action: "delivery_time" }
                ]);
            } else if (lowerText.includes("–æ—à–∏–±–∫–∞") || lowerText.includes("–±–∞–≥")) {
                addBotMessage("–û–ø–∏—à–∏—Ç–µ –æ—à–∏–±–∫—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —è –ø–µ—Ä–µ–¥–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º!");
            } else {
                addBotMessage("–ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª. –ú–æ–∂–µ—Ç–µ —É—Ç–æ—á–Ω–∏—Ç—å? –í–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã:");
                addButtons([
                    { text: "–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–ø–ª–∞—Ç–æ–π", action: "payment_issue" },
                    { text: "–í–æ–ø—Ä–æ—Å –ø–æ —Ç–æ–≤–∞—Ä—É", action: "product_question" },
                    { text: "–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ", action: "report_bug" }
                ]);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // –°—Ç–∞—Ä—Ç —á–∞—Ç–∞
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
        startChat();
    </script>
</body>
</html>